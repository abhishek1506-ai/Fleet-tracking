<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Food Quality Monitoring Solution</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/adminlte.css">
    <link rel="stylesheet" href="../../dist/css/meat.css">
</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav align-items-center cstmtophead">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                <li class="text-center foodTop"> FOOD MONITORING SOLUTION</li>
            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown mr-3">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-bell"></i>
                        <span class="badge badge-warning navbar-badge">5</span>
                    </a>
                </li>
                <li class="dropdown user user-menu mr-3">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: rgba(0, 0, 0, 0.5);">
                        <img src="../../dist/img/user1.jpg" class="user-image float-none mt-0" alt="User Image">
                        <span class="hidden-xs">Welcome Matt Prior</span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="../../dist/img/user1.jpg" class="img-circle" alt="User Image">

                            <p>
                                Matt Prior
                                <small>Warehouse Manager</small>
                            </p>
                        </li>
                        <!-- Menu Body -->

                        <!-- Menu Footer-->
                        <li class="user-footer">

                            <div class="pull-right float-right">
                                <a href="#" class="btn btn-default btn-flat">Sign out</a>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="#" class="brand-link  bg-white">
                <img src="https://d3tj4wnms16o5e.cloudfront.net/s3fs-public/kellton-logo%20%281%29_0_0.png"
                    alt="AdminLTE Logo" class="brand-image float-none">
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user panel (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="../../dist/img/user1.jpg" class="img-circle elevation-2" style="padding-top: 3px;" alt="User Image">
                    </div>
                    <div class="info">
                        <a href="#" class="d-block">Matt Prior</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                        data-accordion="false">
                        <!-- Add icons to the links using the .nav-icon class
                 with font-awesome or any other icon font library -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-warehouse"></i>
                                <p>
                                    Warehouses
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="fas fa-plus nav-icon"></i>
                                        <p>Add Warehouse</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="fas fa-minus nav-icon"></i>
                                        <p>Remove Warehouse</p>
                                    </a>
                                </li>
                            </ul>
                        </li>


                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-chart-line"></i>
                                <p>
                                    Sensors
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="fas fa-plus nav-icon"></i>
                                        <p>Connect Device</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="fas fa-minus nav-icon"></i>
                                        <p>Disconnect Device</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="fas fa-times nav-icon"></i>
                                        <p>Troubleshoot</p>
                                    </a>
                                </li>
                            </ul>
                        </li>


                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-bell"></i>
                                <p>
                                    Set Alerts
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Temperature Limit</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Moisture Limit</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Humidity Limit</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Freshness Thresold</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">


            <!-- custom-section start-->
            <div class="container-fluid content-header fruitsMain">
                <div class="topHead">
                    <ul class="d-flex justify-content-xl-between flex-wrap mt-2 pl-2 mb-0 ">
                        <li>
                            <p>Category</p>
                            <select onchange="getPage(this.value)" class="cstmSelect">
                                <option value="2">Meat</option>
                                <option value="1">Fruits & Vegetables</option>

                            </select>
                        </li>
                        <li>
                            <p>Freezer Units</p>
                            <p>661</p>
                        </li>
                        <li>
                            <p>Active Units</p>
                            <p>589</p>
                        </li>
                        <li>
                            <p>In Transit</p>
                            <p>55</p>
                        </li>
                        <li>
                            <p>Total Incidents</p>
                            <p>32</p>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- custom-section end-->

            <!--warehouse section start-->
            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-6">
                            <!-- LINE CHART -->
                            <div class="card card-info d-none">
                                <div class="card-header d-none">
                                    <h3 class="card-title">Line Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="chart">
                                        <canvas id="lineChart"
                                            style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                    </div>
                                </div>

                            </div>
                            <!-- DONUT CHART -->
                            <div class="card card-danger cstmBg-lightBlue  d-none">
                                <div class="card-header d-none">
                                    <h3 class="card-title">Donut Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="chartwrap">
                                        <div class="donutleftbar">
                                            <div class="settext">Inventory </div>
                                            <canvas id="donutChart"
                                                style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                        </div>
                                        <div class="dtatble table-responsive">
                                            <table class="table table-striped table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td>Apple</td>
                                                        <td>200 lbs</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Banana</td>
                                                        <td>500 lbs</td>

                                                    </tr>
                                                    <tr>
                                                        <td>Kiwi</td>
                                                        <td>300 lbs</td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card-body -->
                            </div>

                            <!-- /.card -->
                            <!-- /.card -->

                            <!-- cold storage units across facilites start -->
                            <div class="card coldUnits">
                                <div class="settext">Cold Strorage Units</div>
                                <div class="dtatble table-responsive">
                                    <table class="table table-striped table-bordered">

                                        <thead>
                                            <tr>
                                                <th>Facility ID</th>
                                                <th>Location</th>
                                                <th>Units</th>
                                                <th>Active Units</th>
                                                <th>Total Weights</th>
                                            </tr>
                                        </thead>
                                        <tbody id="myTable">

                                        </tbody>
                                        <!-- <tbody id="myTable">
                                            <tr >
                                                <td><a href="#">CLDSF004</a></td>
                                                <td>Carlow</td>
                                                <td>54</td>
                                                <td>54</td>
                                                <td>1200</td>
                                            </tr>
                                        </tbody> -->
                                    </table>
                                </div>
                            </div>

                        </div>

                        <!-- /.col (LEFT) -->
                        <div class="col-lg-6">
                            <!-- LINE CHART -->
                            <div class="card card-info d-none">
                                <div class="card-header d-none">
                                    <h3 class="card-title">Line Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="chart">
                                        <canvas id="LineChart"
                                            style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- AREA CHART -->
                            <div class="card card-primary d-none">
                                <div class="card-header">
                                    <h3 class="card-title">Area Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="chart">
                                        <canvas id="areaChart"
                                            style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- /.card -->

                            <!-- BAR CHART -->
                            <div class="card card-success cstmBg-lightBlue">
                                <div class="card-header d-none">
                                    <h3 class="card-title">Bar Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body bdr tempindcident">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="settext">Incidents</div>
                                        <div>
                                            <select onchange="getIncidents(this.value)" class="cstmSelect lyears  mb-3">
                                                <option value="lastWeek">last week</option>
                                                <option value="lastMonth">last month</option>
                                                <option value="lastYear">last year</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class=" position-relative">
                                        <div class="chartoccurrence">
                                            <p class="chartoccurrence mr-3">Occurrences</p>
                                        </div>
                                        <div class="chart ml-auto mr-0">
                                            <canvas id="barChart"
                                                style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                        </div>
                                    </div>

                                </div>
                                <!-- /.card-body -->
                            </div>
                            <!-- /.card -->

                            <!-- PIE CHART -->
                            <div class="card card-danger d-none">
                                <div class="card-header">
                                    <h3 class="card-title">Pie Chart</h3>

                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <canvas id="pieChart"
                                        style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                </div>
                                <!-- /.card-body -->
                            </div>
                            <!-- /.card -->

                        </div>
                        <!-- /.col (RIGHT) -->
                    </div>
                    <!-- /.row -->
                    <div class="storageStaus">
                        <div class="row">
                            <div id="myDIV" class="col-md-3">
                            </div>
                            <div id="myDIV1" class="col-md-9">
                                <div class="card cstmBg-lightBlue">
                                    <div class="statuslocation ">
                                        <div class="statusleft">
                                            <ul>
                                                <li>
                                                    <p>status</p>
                                                    <div id="statusColor" class="cstmowl">
                                                        <p id="status">CONNECTED</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p>location</p>
                                                    <div class="cstmformgurop">

                                                        <div id="location"
                                                            style="width: 100%; border:1px solid #000;border-radius:5px; padding:10px 18px;color: #737373; font-weight: bold; font-size: 20px; margin-top:38px">
                                                            InTransit</div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p>door</p>
                                                    <a id="door" href="javascript:void()" class="bttn-green">CLOSED</a>
                                                </li>
                                                <li class="weight">
                                                    <p>Weight</p>
                                                    <div class="cstmowl">
                                                        <p>50lbs</p>
                                                    </div>
                                                </li>

                                            </ul>
                                        </div>

                                        <div id="chartsDisplay"
                                            class="linechartright d-flex justify-content-between flex-wrap ">
                                            <div class="chart ">
                                                <canvas id="tempChart"
                                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                            </div>
                                            <div class="chart">
                                                <canvas id="humidityChart"
                                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                            </div>
                                            <div class="chart">
                                                <canvas id="airChart"
                                                    style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.container-fluid -->
            </section>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->

        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Add Content Here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- ChartJS -->
    <script src="../../plugins/chart.js/Chart.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../../dist/js/demo.js"></script>
    <!-- Page specific script -->
    <script src="../../dist/js/jquery-min.js"></script>
    <script src="../../dist/js/jquery.transit.min.js"></script>
    <script src="../../dist/js/js.js"></script>
    <script>
        function getPage(type){
            if(type ==1){
                location.href = "./fruit.html";
            }
        }
        var storageID;
        var charts = document.getElementById("myDIV1");
        var lineChart1;
        var lineChart2;
        var lineChart3;
        var facilityLocation;
        var temp;
        var tableData = [
            {
                "FacilityID": "CLDSF004",
                "Location": "Carlow",
                "Units": 54,
                "ActiveUnits": 54,
                "TotalWeights": 1200
            },
            {
                "FacilityID": "CLDSF010",
                "Location": "Boyne",
                "Units": 128,
                "ActiveUnits": 112,
                "TotalWeights": 1601
            },
            {
                "FacilityID": "CLDSF002",
                "Location": "Barrow",
                "Units": 135,
                "ActiveUnits": 123,
                "TotalWeights": 1502
            },
            {
                "FacilityID": "CLDSF121",
                "Location": "Trim",
                "Units": 100,
                "ActiveUnits": 70,
                "TotalWeights": 1000
            },
            {
                "FacilityID": "CLDSF024",
                "Location": "Matt",
                "Units": 100,
                "ActiveUnits": 100,
                "TotalWeights": 1300
            }
        ]
        var incidents = [
            {
                "timeline": "lastWeek",
                "TempExceeded": 4,
                "HumidityExceeded": 2,
                "Co2Exceeded": 2,
                "TransitMishandling": 5,
                "StorageMishandling": 3
            },
            {
                "timeline": "lastMonth",
                "TempExceeded": 12,
                "HumidityExceeded": 11,
                "Co2Exceeded": 16,
                "TransitMishandling": 13,
                "StorageMishandling": 11
            },
            {
                "timeline": "lastYear",
                "TempExceeded": 201,
                "HumidityExceeded": 231,
                "Co2Exceeded": 175,
                "TransitMishandling": 249,
                "StorageMishandling": 168
            }
        ]
        var storageUnits = [
            {
                "storageUnit": "CLDSF004",
                "unit1": "REFGF02",
                "unit2": "REFGF10",
                "unit3": "REFFF01",
                "unit4": "CBFF012",
                "unit5": "CBFF104",
                "unit6": "REFGF024",
                "unit7": "REFGF15"
            },
            {
                "storageUnit": "CLDSF010",
                "unit1": "REFFF09",
                "unit2": "CBFF041",
                "unit3": "CBFF150",
                "unit4": "REFFF61",
                "unit5": "CBFF812",
                "unit6": "CBFF9904",
                "unit7": "REFGF4424"
            },
            {
                "storageUnit": "CLDSF002",
                "unit1": "REFFF10",
                "unit2": "CBFF9905",
                "unit3": "REFF155",
                "unit4": "CBFF1289",
                "unit5": "REFFF11",
                "unit6": "CBFF8700",
                "unit7": "REFFF62"
            },
            {
                "storageUnit": "CLDSF121",
                "unit1": "CBFFF31",
                "unit2": "CBFF9906",
                "unit3": "REFF134",
                "unit4": "CBFF238",
                "unit5": "REFFF12",
                "unit6": "CBFF151",
                "unit7": "REFFF63"
            },
            {
                "storageUnit": "CLDSF024",
                "unit1": "CBFF167",
                "unit2": "CBFF044",
                "unit3": "REFFF03",
                "unit4": "REFFF123",
                "unit5": "REFFF78",
                "unit6": "CBFF152",
                "unit7": "REFFF64"
            }
        ]

        var chartsData = [
            {
                "storageUnit": "REFGF02",
                "data": [
                    {
                        "value": "Temp",
                        "Day1": 35,
                        "Day2": 36,
                        "Day3": 38,
                        "Day4": 37,
                        "Day5": 38,
                        "Day6": 37,
                        "Day7": 35
                    },
                    {
                        "value": "Humidity",
                        "Day1": 95,
                        "Day2": 98,
                        "Day3": 97,
                        "Day4": 96,
                        "Day5": 97,
                        "Day6": 95,
                        "Day7": 96
                    },
                    {
                        "value": "AirQuality",
                        "Day1": 21,
                        "Day2": 23,
                        "Day3": 22,
                        "Day4": 24,
                        "Day5": 20,
                        "Day6": 22,
                        "Day7": 20
                    }
                ]
            },
            {
                "storageUnit": "REFFF01",
                "data": [
                    {
                        "value": "Temp",
                        "Day1": 36,
                        "Day2": 36,
                        "Day3": 39,
                        "Day4": 34,
                        "Day5": 33,
                        "Day6": 33,
                        "Day7": 31
                    },
                    {
                        "value": "Humidity",
                        "Day1": 98,
                        "Day2": 98,
                        "Day3": 97,
                        "Day4": 95,
                        "Day5": 93,
                        "Day6": 92,
                        "Day7": 97
                    },
                    {
                        "value": "AirQuality",
                        "Day1": 21,
                        "Day2": 23,
                        "Day3": 24,
                        "Day4": 21,
                        "Day5": 22,
                        "Day6": 20,
                        "Day7": 23
                    }
                ]
            },
            {
                "storageUnit": "REFFF61",
                "data": [
                    {
                        "value": "Temp",
                        "Day1": 38,
                        "Day2": 35,
                        "Day3": 38,
                        "Day4": 35,
                        "Day5": 34,
                        "Day6": 37,
                        "Day7": 35
                    },
                    {
                        "value": "Humidity",
                        "Day1": 97,
                        "Day2": 90,
                        "Day3": 92,
                        "Day4": 96,
                        "Day5": 93,
                        "Day6": 95,
                        "Day7": 87
                    },
                    {
                        "value": "AirQuality",
                        "Day1": 21,
                        "Day2": 21,
                        "Day3": 20,
                        "Day4": 22,
                        "Day5": 22,
                        "Day6": 20,
                        "Day7": 20
                    }
                ]
            }
        ]

        buildTableData(tableData);
        function buildTableData(data) {
            var table = document.getElementById("myTable");
            for (let i = 0; i < data.length; i++) {
                var row = `<tr>
                        <td id="${data[i].FacilityID}" onclick="myFunction(this)"><a href="javascript:void(0)">${data[i].FacilityID}</td>
                        <td> ${data[i].Location}</td>
                        <td> ${data[i].Units}</td>
                        <td> ${data[i].ActiveUnits}</td>
                        <td> ${data[i].TotalWeights}</td>        
                    </tr>`
                table.innerHTML += row
            }
        }


        function myFunction(x) {
            for (y = 0; y < tableData.length; y++) {
                if (x.id == tableData[y].FacilityID) {
                    facilityLocation = tableData[y].Location;
                    temp = facilityLocation;
                }
            }
            document.getElementById('myDIV').innerHTML = '';
            //alert("Row index is: " + x.rowIndex);
            if (document.getElementById('myDIV').innerHTML == '') {
                var storage = document.getElementById("myDIV");
                var div = document.createElement('div');
                div.className = 'card cstmBg-lightBlue';
                storage.appendChild(div);
                var div1 = document.createElement('div');
                div1.className = 'refStorage';
                div1.innerHTML = `
            <div class="settext mb-2">Cold Storage Units</div>`;
                div.appendChild(div1);
                for (let i = 0; i < storageUnits.length; i++) {
                    if (x.id == storageUnits[i].storageUnit) {
                        var list = `<ul>
                        <li><a id = "${storageUnits[i].unit1}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit1}</a></li>   
                        <li><a id = "${storageUnits[i].unit2}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit2}</a></li>
                        <li><a id = "${storageUnits[i].unit3}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit3}</a></li> 
                        <li><a id = "${storageUnits[i].unit4}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit4}</a></li>     
                        <li><a id = "${storageUnits[i].unit5}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit5}</a></li> 
                        <li><a id = "${storageUnits[i].unit6}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit6}</a></li>  
                        <li><a id = "${storageUnits[i].unit7}" onclick = "getCharts(this)" href="javascript:void(0)">${storageUnits[i].unit7}</a></li>
                    </ul>`
                    }

                }
                div1.innerHTML += list;
                storage.style.display = "block";
            }
            charts.style.display = "none";
        }

        function getIncidents(x) {
            incidentsLabel = [];
            incidentsData = [];
            for (i = 0; i < incidents.length; i++) {
                if (x == incidents[i].timeline) {
                    incidentsLabel.push(incidents[i].timeline);
                    incidentsData.push(incidents[i].TempExceeded);
                    incidentsData.push(incidents[i].HumidityExceeded);
                    incidentsData.push(incidents[i].Co2Exceeded);
                    incidentsData.push(incidents[i].TransitMishandling);
                    incidentsData.push(incidents[i].StorageMishandling);
                }
            }

            var newBarChartData = {
                labels: ['Temp Exceeded', 'Humidity Exceeded', 'Co2 Exceeded', 'Transit Mishandling', 'Storage Mishandling'],
                datasets: [{
                    label: incidentsLabel[0],
                    backgroundColor: '#4e8fb8',
                    borderColor: 'rgba(60,141,188,0.8)',
                    pointRadius: false,
                    pointColor: '#3b8bba',
                    pointStrokeColor: 'rgba(60,141,188,1)',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(60,141,188,1)',
                    data: incidentsData
                }

                ]
            }
            barChart.data.datasets = newBarChartData.datasets;
            barChart.data.labels = newBarChartData.labels;
            barChart.update();
        }

        function getCharts(y) {
            if (y.id == 'REFFF01') {
                facilityLocation = "InTransit";
                var Door = document.getElementById('door');
                Door.innerHTML = "Open";
                Door.style.backgroundColor = "red";
            }
            else {
                facilityLocation = temp;
                var Door = document.getElementById('door');
                Door.innerHTML = "Closed";
                Door.style.backgroundColor = "green";
            }
            if (y.id == "REFGF02" || y.id == "REFFF01" || y.id == "REFFF61") {
                for (i = 0; i < chartsData.length; i++) {
                    if (y.id == chartsData[i].storageUnit) {
                        document.getElementById('status').innerHTML = "Connected";
                        document.getElementById('statusColor').style.backgroundColor = "green";
                        tempData = [];
                        humidityData = [];
                        airQualityData = [];
                        // pushing temperature data for the charts
                        tempData.push(chartsData[i].data[0].Day1)
                        tempData.push(chartsData[i].data[0].Day2)
                        tempData.push(chartsData[i].data[0].Day3)
                        tempData.push(chartsData[i].data[0].Day4)
                        tempData.push(chartsData[i].data[0].Day5)
                        tempData.push(chartsData[i].data[0].Day6)
                        tempData.push(chartsData[i].data[0].Day7)
                        // pushing Humidity data for the charts
                        humidityData.push(chartsData[i].data[1].Day1)
                        humidityData.push(chartsData[i].data[1].Day2)
                        humidityData.push(chartsData[i].data[1].Day3)
                        humidityData.push(chartsData[i].data[1].Day4)
                        humidityData.push(chartsData[i].data[1].Day5)
                        humidityData.push(chartsData[i].data[1].Day6)
                        humidityData.push(chartsData[i].data[1].Day7)
                        // pushing Air Quality data for the charts
                        airQualityData.push(chartsData[i].data[2].Day1)
                        airQualityData.push(chartsData[i].data[2].Day2)
                        airQualityData.push(chartsData[i].data[2].Day3)
                        airQualityData.push(chartsData[i].data[2].Day4)
                        airQualityData.push(chartsData[i].data[2].Day5)
                        airQualityData.push(chartsData[i].data[2].Day6)
                        airQualityData.push(chartsData[i].data[2].Day7)
                        // ------displaying the charts--------- //
                        var areaChartData1 = {
                            labels: ['Day1', 'Day2', 'Day3', 'Day4', 'Day5', 'Day6', 'Day7'],
                            datasets: [{
                                label: 'Temp',
                                borderColor: '#4e8fb8',
                                lineTension: 0,
                                fill: false,
                                data: tempData
                            }]
                        }
                        var areaChartOptions1 = {
                            maintainAspectRatio: false,
                            responsive: true,
                            legend: {
                                display: false,

                            },
                            scales: {
                                xAxes: [{
                                    ticks: {
                                        fontColor: "#445054", // this here
                                    },
                                    gridLines: {
                                        display: false,
                                    },
                                }],
                                yAxes: [{
                                    ticks: {
                                        fontColor: "#445054", // this here
                                        min: 30,
                                        max: 40,
                                        stepSize: 1,
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Temperature',
                                        fontColor: "#445054",

                                    }
                                }]
                            }
                        }

                        //-------------
                        //- line CHART1 -
                        //-------------
                        var tempChartCanvas = $('#tempChart').get(0).getContext('2d')
                        var tempChartOptions = $.extend(true, {}, areaChartOptions1)
                        var tempChartData = $.extend(true, {}, areaChartData1)
                        if (lineChart1) {
                            lineChart1.data.datasets = areaChartData1.datasets;
                            lineChart1.data.labels = areaChartData1.labels;
                            lineChart1.update();
                        }
                        else {
                            lineChart1 = new Chart(tempChartCanvas, {
                                type: 'line',
                                data: tempChartData,
                                options: tempChartOptions
                            })
                        }

                        var areaChartData2 = {
                            labels: ['Day1', 'Day2', 'Day3', 'Day4', 'Day5', 'Day6', 'Day7'],
                            datasets: [{
                                label: 'Humidity',
                                borderColor: '#4e8fb8',
                                lineTension: 0,
                                pointColor: '#3b8bba',
                                fill: false,
                                pointStrokeColor: 'rgba(225,225,225,1)',
                                pointHighlightFill: '#fff',
                                pointHighlightStroke: 'rgba(225,225,225,1)',
                                data: humidityData
                            }]
                        }
                        var areaChartOptions2 = {
                            maintainAspectRatio: false,
                            responsive: true,
                            legend: {
                                display: false
                            },
                            scales: {
                                xAxes: [{
                                    gridLines: {
                                        display: false,
                                    },
                                    ticks: {
                                        fontColor: "#445054", // this here
                                    },
                                }],
                                yAxes: [{
                                    gridLines: {
                                        display: true,
                                    },
                                    ticks: {
                                        fontColor: "#445054",
                                        min: 87,
                                        max: 100,
                                        stepSize: 1, // this here
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Humidity',
                                        fontColor: "#445054"
                                    }
                                }]
                            }
                        }
                        //-------------
                        //- line CHART2 -
                        //-------------
                        var humidityChartCanvas = $('#humidityChart').get(0).getContext('2d')
                        var humidityChartOptions = $.extend(true, {}, areaChartOptions2)
                        var humidityChartData = $.extend(true, {}, areaChartData2)

                        if (lineChart2) {
                            lineChart2.data.datasets = areaChartData2.datasets;
                            lineChart2.data.labels = areaChartData2.labels;
                            lineChart2.update();
                        }
                        else {
                            lineChart2 = new Chart(humidityChartCanvas, {
                                type: 'line',
                                data: humidityChartData,
                                options: humidityChartOptions
                            })
                        }
                        var areaChartData3 = {
                            labels: ['Day1', 'Day2', 'Day3', 'Day4', 'Day5', 'Day6', 'Day7'],
                            datasets: [{
                                label: 'AirQuality',
                                borderColor: '#4e8fb8',
                                lineTension: 0,
                                pointColor: '#3b8bba',
                                fill: false,
                                pointStrokeColor: 'rgba(225,225,225,1)',
                                pointHighlightFill: '#fff',
                                pointHighlightStroke: 'rgba(225,225,225,1)',
                                data: airQualityData
                            }]
                        }
                        var areaChartOptions3 = {
                            maintainAspectRatio: false,
                            responsive: true,
                            legend: {
                                display: false
                            },
                            scales: {
                                xAxes: [{
                                    gridLines: {
                                        display: false,
                                    },
                                    ticks: {
                                        fontColor: "#445054", // this here
                                    },
                                }],
                                yAxes: [{
                                    gridLines: {
                                        display: true,
                                    },
                                    ticks: {
                                        fontColor: "#445054",
                                        min: 15,
                                        max: 25,
                                        stepSize: 1, // this here
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Air Quality',
                                        fontColor: "#445054"
                                    }
                                }]
                            }
                        }
                        //-------------
                        //- line CHART3 -
                        //-------------
                        var airChartCanvas = $('#airChart').get(0).getContext('2d')
                        var airChartOptions = $.extend(true, {}, areaChartOptions3)
                        var airChartData = $.extend(true, {}, areaChartData3)

                        if (lineChart3) {
                            lineChart3.data.datasets = areaChartData3.datasets;
                            lineChart3.data.labels = areaChartData3.labels;
                            lineChart3.update();
                        }
                        else {
                            lineChart3 = new Chart(airChartCanvas, {
                                type: 'line',
                                data: airChartData,
                                options: airChartOptions
                            })
                        }
                        document.getElementById('location').innerHTML = facilityLocation;
                        charts.style.display = "block";
                    }
                }
            }
            else {
                document.getElementById('location').innerHTML = temp;
                document.getElementById('status').innerHTML = "Disconnected";
                document.getElementById('statusColor').style.backgroundColor = "red";
                charts.style.display = "block";
                lineChart1.clear();
                lineChart2.clear();
                lineChart3.clear();
            }
        }
        /* ChartJS
         * -------
         * Here we will create a few charts using ChartJS
         */

        //--------------
        //- AREA CHART -
        //--------------

        // Get context with jQuery - using jQuery's .get() method.
        var areaChartCanvas = $('#areaChart').get(0).getContext('2d')

        var areaChartData = {
            labels: ['Temp Exceeded', 'Humidity Exceeded', 'Co2 Exceeded', 'Transit Mishandling', 'Storage Mishandling'],
            datasets: [{
                label: 'last week',
                backgroundColor: '#4e8fb8',
                borderColor: 'rgba(60,141,188,0.8)',
                pointRadius: false,
                pointColor: '#3b8bba',
                pointStrokeColor: 'rgba(60,141,188,1)',
                pointHighlightFill: '#fff',
                pointHighlightStroke: 'rgba(60,141,188,1)',
                data: [4, 2, 2, 5, 3]
            }

            ]
        }

        var areaChartOptions = {
            maintainAspectRatio: false,
            responsive: true,
            legend: {
                display: false
            },
            scales: {
                xAxes: [{
                    gridLines: {
                        display: false,
                    },
                }],
                yAxes: [{
                    gridLines: {
                        display: false,

                    },
                }]
            }
        }



        var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
        var donutData = {
            labels: [
                'Fruit A',
                'Fruit B',
                'Fruit C'
            ],
            datasets: [{
                data: [45, 25, 30],
                backgroundColor: ['#f56954', '#00a65a', '#f39c12'],

            }]
        }
        var donutOptions = {
            maintainAspectRatio: false,
            responsive: true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        new Chart(donutChartCanvas, {
            type: 'doughnut',
            data: donutData,
            options: donutOptions
        })

        //-------------
        //- PIE CHART -
        //-------------
        // Get context with jQuery - using jQuery's .get() method.
        var pieChartCanvas = $('#pieChart').get(0).getContext('2d')
        var pieData = donutData;
        var pieOptions = {
            maintainAspectRatio: false,
            responsive: true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        new Chart(pieChartCanvas, {
            type: 'pie',
            data: pieData,
            options: pieOptions
        })

        //-------------
        //- BAR CHART -
        //-------------
        var barChartCanvas = $('#barChart').get(0).getContext('2d')
        var barChartData = $.extend(true, {}, areaChartData)

        var barChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            datasetFill: false,
            legend: {
                display: false
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        fontColor: "#445054"
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: "#445054",
                        fontSize:12
                    }
                }]
            }
        }

        var barChart = new Chart(barChartCanvas, {
            type: 'bar',
            data: barChartData,
            options: barChartOptions
        })


    </script>
</body>

</html>